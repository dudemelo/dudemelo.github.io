(()=>{(()=>{"use strict";let s=document.querySelector("canvas");s.width=document.body.clientWidth,s.height=450;let r=s.getContext("2d");class u{constructor(t){this.typingFrame=0,this.glitchFrame=0,this.element=t,this.original=t.innerText,this.scrambled="",t.innerText=""}getRandomChar(){let t="~!@#$%*()_+-=?<>{}";return t[Math.round(Math.random()*(t.length-1))]}done(){return this.scrambled===this.original}updateType(){if(this.typingFrame++,this.typingFrame===4||this.done())return;this.typingFrame=0,this.scrambled+=this.original[this.scrambled.length];let t=this.scrambled.length>8?this.scrambled:"";for(let i=0;i<=8;i++)t+=this.getRandomChar();this.element.innerText=this.done()?this.scrambled:t}updateGlitch(){if(this.glitchFrame++,this.glitchFrame<=300){this.element.innerText=this.original;return}if(this.glitchFrame>=320){this.scrambled=this.original,this.glitchFrame=0;return}let t=this.scrambled.length-6,i=Math.round(Math.random()*(t-1)+1);this.scrambled=this.original.slice(0,i);for(let e=0;e<5;e++)this.scrambled+=this.getRandomChar();this.scrambled+=this.original.slice(i+5),this.element.innerText=this.scrambled}}class l{constructor(){this.typingQueue=[],this.glitchQueue=[],document.querySelectorAll("[data-scrambled]").forEach(t=>{this.typingQueue.push(new u(t))})}update(){if(this.typingQueue.length>0){let t=this.typingQueue[0];t.updateType(),t.done()&&this.glitchQueue.push(this.typingQueue.shift())}this.glitchQueue.forEach(t=>t.updateGlitch())}}class n{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return this.x+=t.x,this.y+=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}circularDistance(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}}class x{constructor(t=new n(0,0),i=0,e=0){this.position=t,this.width=i,this.height=e}center(){return new n(this.width/2+this.position.x,this.height/2+this.position.y)}}class m{constructor(t,i,e){this.pos=t,this.rad=i,this.minRad=i,this.maxRad=e,this.hover=!1,this.prevHover=!1,this.mousePos=new n,this.animProgress=0,this.animDirection=0,this.speed=.01,document.addEventListener("mousemove",this.updateMousePosition.bind(this))}updateMousePosition(t){let i=s.getBoundingClientRect();this.mousePos=new n(t.clientX-i.x,t.clientY-i.y)}easeOutElastic(t){let i=2*Math.PI/3;return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*i)+1}updateRadius(){let t=this.pos.circularDistance(this.mousePos);this.hover=t<this.rad+this.rad*2,this.hover!==this.prevHover&&(this.animDirection=this.hover?1:-1),(this.animDirection===1&&this.animProgress<1||this.animDirection===-1&&this.animProgress>0)&&(this.animProgress+=this.animDirection*this.speed,this.animProgress=Math.max(0,Math.min(1,this.animProgress)));let i=this.easeOutElastic(this.animProgress);this.rad=this.minRad+(this.maxRad-this.minRad)*i,this.prevHover=this.hover}draw(){r.beginPath(),r.fillStyle=`rgba(0, 100, 180, ${this.hover?1:.15})`,r.arc(this.pos.x,this.pos.y,this.rad,0,2*Math.PI),r.fill(),r.closePath()}update(){this.updateRadius(),this.draw()}}class g{constructor(){this.grid=[],this.updateGrid()}updateGrid(){let t={min:4,max:30},i=20,e={x:Math.round(s.width/(t.min+i)),y:Math.round((s.height-t.max*3)/(t.min+i))};for(let a=0;a<e.x;a++)for(let o=0;o<e.y;o++)this.grid.push(new m(new n(a*(t.min*2+i),o*(t.min*2+i)),t.min,t.max))}update(){r.clearRect(0,0,s.width,s.height),this.grid.forEach(t=>{t.update()})}}let p=new l,c=new g;window.addEventListener("resize",()=>{s.width=document.body.clientWidth,c.updateGrid()});let y=performance.now();function d(h){p.update(),c.update(),requestAnimationFrame(d),y=h}requestAnimationFrame(d)})();})();
