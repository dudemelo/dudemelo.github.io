(()=>{(()=>{"use strict";let s=document.querySelector("canvas");s.width=window.innerWidth-20,s.height=300;let e=s.getContext("2d");class o{constructor(t){this.typingFrame=0,this.glitchFrame=0,this.element=t,this.original=t.innerText,this.scrambled="",t.innerText=""}getRandomChar(){let t="~!@#$%*()_+-=?<>{}";return t[Math.round(Math.random()*(t.length-1))]}done(){return this.scrambled===this.original}updateType(){if(this.typingFrame++,this.typingFrame===4||this.done())return;this.typingFrame=0,this.scrambled+=this.original[this.scrambled.length];let t=this.scrambled.length>8?this.scrambled:"";for(let i=0;i<=8;i++)t+=this.getRandomChar();this.element.innerText=this.done()?this.scrambled:t}updateGlitch(){if(this.glitchFrame++,this.glitchFrame<=300){this.element.innerText=this.original;return}if(this.glitchFrame>=320){this.scrambled=this.original,this.glitchFrame=0;return}let t=this.scrambled.length-6,i=Math.round(Math.random()*(t-1)+1);this.scrambled=this.original.slice(0,i);for(let a=0;a<5;a++)this.scrambled+=this.getRandomChar();this.scrambled+=this.original.slice(i+5),this.element.innerText=this.scrambled}}class c{constructor(){this.typingQueue=[],this.glitchQueue=[],document.querySelectorAll("[data-scrambled]").forEach(t=>{this.typingQueue.push(new o(t))})}update(){if(this.typingQueue.length>0){let t=this.typingQueue[0];t.updateType(),t.done()&&this.glitchQueue.push(this.typingQueue.shift())}this.glitchQueue.forEach(t=>t.updateGlitch())}}class n{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return this.x+=t.x,this.y+=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}}class l{constructor(t=0,i=0,a=0,f=0){this.x=t,this.y=i,this.width=a,this.height=f}}class d{constructor(){this.reset()}reset(){this.size=Math.random()*10+5;let t=Math.random()*.8*(.8-.4)+.4*(-1*Math.round(Math.random()));this.velocity=new n(t,t),this.position=new n(Math.random()*s.width,Math.random()*s.height)}update(){(this.position.x+this.size<0||this.position.x>s.width||this.position.y+this.size<0||this.position.y>s.height)&&this.reset(),this.position.add(this.velocity);let t=Math.random()*(.5-.1)+.1;e.beginPath(),e.fillStyle=`rgba(100, 150, 80, ${t})`,e.fillRect(this.position.x,this.position.y,this.size,this.size),e.closePath()}}class u{constructor(){this.rects=[];for(let t=0;t<10;t++){let i=this.getRandomWidth();this.rects.push(new l(s.width-i-50,10*t+50,i,3))}}getRandomWidth(){return Math.random()*150+50}update(){e.beginPath(),e.fillStyle="rgba(100, 150, 0, 0.4)",this.rects.forEach(t=>{t.y<=50&&(t.width=this.getRandomWidth(),t.x=s.width-t.width-50),t.y-=t.y<=50?-(10*10):1,e.fillRect(t.x,t.y,t.width,t.height)}),e.closePath()}}class m{constructor(){this.squares=[],this.fakeCode=new u;for(let t=0;t<20;t++)this.squares.push(new d)}update(){e.clearRect(0,0,s.width,s.height),this.squares.forEach(t=>t.update()),this.fakeCode.update()}}let g=new c,p=new m,y=performance.now();function r(h){g.update(),p.update(),requestAnimationFrame(r),y=h}requestAnimationFrame(r)})();})();
