(()=>{(()=>{"use strict";let s=document.querySelector("canvas");s.width=document.body.clientWidth,s.height=450;let e=s.getContext("2d");class c{constructor(t){this.typingFrame=0,this.glitchFrame=0,this.element=t,this.original=t.innerText,this.scrambled="",t.innerText=""}getRandomChar(){let t="~!@#$%*()_+-=?<>{}";return t[Math.round(Math.random()*(t.length-1))]}done(){return this.scrambled===this.original}updateType(){if(this.typingFrame++,this.typingFrame===4||this.done())return;this.typingFrame=0,this.scrambled+=this.original[this.scrambled.length];let t=this.scrambled.length>8?this.scrambled:"";for(let i=0;i<=8;i++)t+=this.getRandomChar();this.element.innerText=this.done()?this.scrambled:t}updateGlitch(){if(this.glitchFrame++,this.glitchFrame<=300){this.element.innerText=this.original;return}if(this.glitchFrame>=320){this.scrambled=this.original,this.glitchFrame=0;return}let t=this.scrambled.length-6,i=Math.round(Math.random()*(t-1)+1);this.scrambled=this.original.slice(0,i);for(let h=0;h<5;h++)this.scrambled+=this.getRandomChar();this.scrambled+=this.original.slice(i+5),this.element.innerText=this.scrambled}}class d{constructor(){this.typingQueue=[],this.glitchQueue=[],document.querySelectorAll("[data-scrambled]").forEach(t=>{this.typingQueue.push(new c(t))})}update(){if(this.typingQueue.length>0){let t=this.typingQueue[0];t.updateType(),t.done()&&this.glitchQueue.push(this.typingQueue.shift())}this.glitchQueue.forEach(t=>t.updateGlitch())}}class o{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return this.x+=t.x,this.y+=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}}class r{constructor(t=new o(0,0),i=0,h=0){this.position=t,this.width=i,this.height=h}center(){return new o(this.width/2+this.position.x,this.height/2+this.position.y)}}class l{constructor(){this.reset()}getRandomSpeed(){return Math.random()*.8*(.8-.4)+.4*(-1*Math.round(Math.random()))}reset(){let t=Math.random()*10+5;this.velocity=new o(this.getRandomSpeed(),this.getRandomSpeed());let i=new o(Math.random()*s.width,Math.random()*s.height);this.rect=new r(i,t,t)}update(){(this.rect.position.x+this.rect.width<0||this.rect.position.x>s.width||this.rect.position.y+this.rect.height<0||this.rect.position.y>s.height)&&this.reset(),this.rect.position.add(this.velocity),e.beginPath(),e.fillStyle="rgba(255, 255, 255, 0.1)",e.fillRect(this.rect.position.x,this.rect.position.y,this.rect.width,this.rect.height),e.closePath()}}class u{constructor(){this.amountRects=10,this.spacing=8,this.rects=[];for(let t=0;t<this.amountRects;t++){let i=this.getRandomWidth(),h=new o(s.width-i,this.spacing*t);this.rects.push(new r(h,i,2))}}getRandomWidth(){return Math.random()*100+50}update(){e.beginPath(),e.fillStyle="rgba(150, 150, 150, 0.3)",this.rects.forEach(t=>{t.position.y<=0&&(t.width=this.getRandomWidth(),t.position.x=s.width-t.width),t.position.y-=t.position.y<=0?-(this.spacing*this.amountRects):1.4,e.fillRect(t.position.x,t.position.y,t.width,t.height)}),e.closePath()}}class m{constructor(){this.squares=[],this.fakeCode=new u;for(let t=0;t<30;t++)this.squares.push(new l)}update(){e.clearRect(0,0,s.width,s.height);let t;this.squares.forEach(i=>{let h=i.rect.center();i.update(),t instanceof o&&(e.beginPath(),e.strokeStyle="rgba(255, 255, 255, 0.05)",e.moveTo(t.x,t.y),e.lineTo(h.x,h.y),e.stroke(),e.closePath()),t=i.rect.center()}),this.fakeCode.update()}}let g=new d,p=new m,y=performance.now();function a(n){g.update(),p.update(),requestAnimationFrame(a),y=n}requestAnimationFrame(a)})();})();
